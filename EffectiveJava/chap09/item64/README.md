## 64. 객체는 인터페이스를 사용해 참조하라.

: 매개변수 타입으로 클래스가 아니라 인터페이스를 사용해야한다.

### 🎃 적합한 인터페이스만 있다면 매개변수뿐만 아니라 반환값, 변수, 필드를 전부 인터페이스 타입으로 선언하라.

```java
//좋은 예
Set<Son> sonSet = new TreeSet<>();

//나쁜 예
LinkedHashSet<Son> sonSet = new TreeSet<>(); //컴파일 에러!
```

- 인터페이스를 타입으로 사용하는 습관을 길러두면 프로그램이 훨씬 유연해질 것이다.

### 🎃 주의사항

- 원래의 클래스가 일반 규약 이외의 특별한 기능을 제공하고, 그 기능에 기대어 동작한다면 새로운 크래스도 반드시 같은 기능을 제공해야 한다.
  - 즉, `LinkedHashSet`을 따르는 순서정책을 가정하고 추후에 `HashSet`으로 변경하면 문제가 생길 수 있다.
- 구현타입을 바꾸려는 동기는?
  - 원래의 것보다 성능이 좋거나 멋진 신기능을 제공하기 때문
- 선언타입과 구현 타입을 동시에 바꿀 수 있으니 변수를 구현타입으로 선언해도 괜찮을 거라 생각하지만 컴파일 되지 않을 수 있다.
  - 클라이언트에서 기존타입에서만 제공하는 메소드를 넘긴다던가..
- 적합한 인터페이스가 없다면 클래스를 참조해야 한다.

### 🎃 적합한 클래스가 없는 부류

- 클래스 기반으로 작성된 프레임워크가 제공하는 객체들
- 인터페이스에는 없는 특별한 메소드를 제공하는 클래스들
  - PriorityQueue 클래스는 Queue 인터페이스에는 없는 comparator를 제공한다.

**→ 적합한 인터페이스가 없다면 클래스의 계층구조 중 필요한 기능을 만족하는 가장 덜 구체적인 상위클래스를 타입으로 사용하자.**