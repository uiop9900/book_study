## 24. 멤버클래스는 되도록 static으로 만들라.

중첩클래스는 다른 클래스 안에 정의된 클래스를 말한다. 종류는 아래와 같이 4가지가 있다.

### 💎 정적 멤버 클래스

: 다른 클래스 안에서 선언되고 바깥 클래스의 private 멤버에도 접근할 수 있다.

- 바깥 인스턴스와 독립적으로 존재하고 싶다면 정적 멤버 클래스로 선언한다.
- public 도우미 클래스

    ```java
    public class Calculator{
      public enum Operator{ // 열거타입도 정적 멤버 클래스이다
        PLUS(),MINUS()
      }
      public static class Operator{ // 대부분 이처럼 선언
    
      }
    }
    ```


### 💎 비정적 멤버 클래스

: 정적 멤버 클래스와 static 유무의 차이이다.

- 비정적 멤버 클래스는 바깥의 클래스와 암묵적으로 연결된다.
  - this를 통해서 바깥 인스턴스를 참조할 수 있다.
- 바깥 인스턴스 없이 생성이 불가하다.
- 주로 어댑터 정의로 많이 쓰인다.
  - 어떤 클래스의 인스턴스를 감싸 다른 클래스의 인스턴스처럼 보이게 하는 뷰

    ```java
    public class MySet<E> extends AbstractSet<E> {
        ... // 생략
        @Override public Iterator<E> iterator() {
            return new MyIterator();
        }
    
        private class MyIterator implements Iterator<E> {
            ...
        }
    }
    ```


→ 둘 다 한번 확립되면 변경할 수 없다.

→ 바깥 인스턴스에 접근할 일이 없다면 무조건 `static`을 붙여서 정적 멤버 클래스로 만든다.

### 💎 익명 클래스

: 이름이 없는 클래스로, 다시 불러질 이유가 없다 → 일시적으로 한번만 사용되고 버리는 객체(일회용 클래스)

- 쓰이는 시점에 선언과 동시에 인스턴스가 만들어진다. → 코드의 어디서든 만들 수 있다.
- 오진 비정적인 문맥에서 사용될때만 바깥클래스의 인스턴스를 참조할 수 있다.
  - 상수를 위해 초기화된 final 기본타입과 문자열필드만 가질수있다.
- 선언한 지점에서만 인스턴스 생성 가능
- 이름이 필요한 작업은 수행할 수 없다. → ‘익명’이니까
- 여러 인터페이스가 구현불가
- 인터페이스 구현과 상속을 동시에 할 수 없다.
  - 상위타입에서 상속한 멤보 외에는 호출이 불가하다.

```java
// 부모 클래스
class Animal {
    public String bark() {
        return "동물이 웁니다";
    }
}

public class Main {
    public static void main(String[] args) {
        // 익명 클래스 : 클래스 정의와 객체화를 동시에. 일회성으로 사용
        Animal dog = new Animal() {
        	@Override
            public String bark() {
                return "개가 짖습니다";
            }
        }; // 단 익명 클래스는 끝에 세미콜론을 반드시 붙여 주어야 한다.
        	
        // 익명 클래스 객체 사용
        dog.bark();
    }
}
```

- 주로 정적팩토리 메소드 때 사용된다.

### 💎 지역 클래스

: 가장 드물게 사용되는 클래스로 지역변수를 선언할 수 있는 곳이면 다 선언이 가능하며 유효범위도 지역변수와 동일하다.

- 이름이 있고 반복해서 사용이 가능ㅇ하다.
- 비정적문맥에서 사용될때마 바깥인스턴스 참조 가능하다
- 가독성을 위해 짧게 작성한다.

### 💎 정리

```java
메소드밖에서 사용해야하거나 메소드 안에 다 정의하기 힘들다면 멤버 클래스로 만든다.
- 인스턴스 각각이 바깥 인스턴스를 참조한다 -> 비정적
- 인스턴스 각각이 바깥 인스턴스를 참조하지 않는다 -> 정적
- 인스턴스 생성지점이 단 한곳이고 해당 타입으로 쓰기 적합한 클래스나 인터페이스가 이미 존재 -> 익명클래스
- 그렇지않으면 -> 지역클래스
```

